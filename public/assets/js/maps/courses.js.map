{"version":3,"sources":["node_modules/browser-pack/_prelude.js","source/js/courses.js","source/js/prepareSend.js","source/js/sendAjax.js","source/js/upload.js"],"names":[],"mappings":"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","file":"../courses.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import fileUpload from './upload';\r\nimport prepareSend from './prepareSend';\r\n\r\nconst formAddCourse = document.querySelector('#add-course');\r\nconst fileSelect = document.querySelector('#file-select');\r\nconst addNew = document.querySelector('#add-new');\r\n\r\n// this hack to prevent double data in db\r\n$( \"#add-btn\" ).unbind( \"click\" );\r\n$(\"#img-holder\").attr('data-content','Upload picture');\r\nfileSelect.addEventListener('change', function (e) { handleFileSelect(e);  prepareSendFile(e); });\r\nformAddCourse.addEventListener('submit', prepareSendCourse);\r\nformAddCourse.addEventListener('reset', (e) => { formAddCourse.style.display = \"none\"; });\r\naddNew.addEventListener('click', (e) => { e.preventDefault(); formAddCourse.style.display = \"block\"; });\r\n\r\nfunction handleFileSelect(evt) {\r\n  var f = evt.target.files[0];\r\n    var reader = new FileReader();\r\n          reader.onload = (function(theFile) {\r\n      return function(e) {          \r\n        $(\"#img-holder\").attr(\"style\",\"background-image: url(\"+e.target.result+\");\");\r\n        $(\"#img-holder\").attr('data-content','');\r\n        localStorage.setItem('img', e.target.result);\r\n      };\r\n    })(f);\r\n    reader.readAsDataURL(f);    \r\n}\r\n\r\nfunction prepareSendFile(e) {\r\n    e.preventDefault();\r\n    let resultContainer = formAddCourse.querySelector('.status');\r\n    let formData = new FormData();\r\n    let file = document\r\n      .querySelector('#file-select')\r\n      .files[0];\r\n    let name = document\r\n      .querySelector('#desc')\r\n      .value || 'course';\r\n  \r\n    formData.append('photo', file, file.name);\r\n    formData.append('name', name);\r\n  \r\n    resultContainer.innerHTML = 'Uploading...';\r\n    fileUpload('/courses/upload', formData, function (data) {      \r\n      resultContainer.innerHTML = data.status;\r\n      $(\"#img-holder\").attr(\"style\",`background-image:url(\"${data.url}\");`);\r\n      $(\"#img-holder\").attr('data-content','');\r\n      // formUpload.reset();\r\n    });\r\n  }\r\n\r\nfunction prepareSendCourse(e) {    \r\n  e.preventDefault();\r\n  let link = $(\"#img-holder\").css(\"background-image\").trim();   \r\n  let pic = link.substring(5, link.length - 2);  \r\n  let start = formAddCourse.start.value || new Date();\r\n  let end = formAddCourse.end.value || new Date();  \r\n\r\n  let data = {\r\n    picture: pic,\r\n    dateStart: start,\r\n    dateEnd: end,\r\n    name: formAddCourse.name.value,\r\n    desc: formAddCourse.desc.value\r\n  };\r\n  \r\n  prepareSend('/courses/addcourse', formAddCourse, data);\r\n  location.reload();\r\n}","import sendAjaxJson from './sendAjax';\r\n\r\nexport default function prepareSend(url, form, data, cb) {\r\n  let resultContainer = form.querySelector('.status');\r\n  resultContainer.innerHTML = 'Sending...';\r\n  sendAjaxJson(url, data, function (data) {\r\n    form.reset();\r\n    resultContainer.innerHTML = data;\r\n    if (cb) {\r\n      cb(data);\r\n    }\r\n  });\r\n}","export default function (url, data, cb) {\r\n  let xhr = new XMLHttpRequest();\r\n  xhr.open('POST', url, true);\r\n  xhr.setRequestHeader('Content-Type', 'application/json');\r\n  xhr.onload = function (e) {\r\n    let result;\r\n    try {\r\n      result = JSON.parse(xhr.responseText);\r\n    } catch (e) {\r\n      cb('Error');\r\n    }\r\n    cb(result.status);\r\n  };\r\n  xhr.send(JSON.stringify(data));\r\n}","export default function (url, data, cb) {\r\n  let xhr = new XMLHttpRequest();\r\n  xhr.open('POST', url, true);\r\n\r\n  xhr.onload = function (e) {\r\n    let result = JSON.parse(xhr.responseText);\r\n    cb(result.status);\r\n  };\r\n\r\n  xhr.send(data);\r\n}"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzb3VyY2UvanMvY291cnNlcy5qcyIsInNvdXJjZS9qcy9wcmVwYXJlU2VuZC5qcyIsInNvdXJjZS9qcy9zZW5kQWpheC5qcyIsInNvdXJjZS9qcy91cGxvYWQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBOzs7O0FBQ0E7Ozs7OztBQUVBLElBQU0sZ0JBQWdCLFNBQVMsYUFBVCxDQUF1QixhQUF2QixDQUF0QjtBQUNBLElBQU0sYUFBYSxTQUFTLGFBQVQsQ0FBdUIsY0FBdkIsQ0FBbkI7QUFDQSxJQUFNLFNBQVMsU0FBUyxhQUFULENBQXVCLFVBQXZCLENBQWY7O0FBRUE7QUFDQSxFQUFHLFVBQUgsRUFBZ0IsTUFBaEIsQ0FBd0IsT0FBeEI7QUFDQSxFQUFFLGFBQUYsRUFBaUIsSUFBakIsQ0FBc0IsY0FBdEIsRUFBcUMsZ0JBQXJDO0FBQ0EsV0FBVyxnQkFBWCxDQUE0QixRQUE1QixFQUFzQyxVQUFVLENBQVYsRUFBYTtBQUFFLG1CQUFpQixDQUFqQixFQUFzQixnQkFBZ0IsQ0FBaEI7QUFBcUIsQ0FBaEc7QUFDQSxjQUFjLGdCQUFkLENBQStCLFFBQS9CLEVBQXlDLGlCQUF6QztBQUNBLGNBQWMsZ0JBQWQsQ0FBK0IsT0FBL0IsRUFBd0MsVUFBQyxDQUFELEVBQU87QUFBRSxnQkFBYyxLQUFkLENBQW9CLE9BQXBCLEdBQThCLE1BQTlCO0FBQXVDLENBQXhGO0FBQ0EsT0FBTyxnQkFBUCxDQUF3QixPQUF4QixFQUFpQyxVQUFDLENBQUQsRUFBTztBQUFFLElBQUUsY0FBRixHQUFvQixjQUFjLEtBQWQsQ0FBb0IsT0FBcEIsR0FBOEIsT0FBOUI7QUFBd0MsQ0FBdEc7O0FBRUEsU0FBUyxnQkFBVCxDQUEwQixHQUExQixFQUErQjtBQUM3QixNQUFJLElBQUksSUFBSSxNQUFKLENBQVcsS0FBWCxDQUFpQixDQUFqQixDQUFSO0FBQ0UsTUFBSSxTQUFTLElBQUks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LE1BQU0sSUFBSSxjQUFKLEVBQVY7QUFDQSxNQUFJLElBQUosQ0FBUyxNQUFULEVBQWlCLEdBQWpCLEVBQXNCLElBQXRCO0FBQ0EsTUFBSSxnQkFBSixDQUFxQixjQUFyQixFQUFxQyxrQkFBckM7QUFDQSxNQUFJLE1BQUosR0FBYSxVQUFVLENBQVYsRUFBYTtBQUN4QixRQUFJLGVBQUo7QUFDQSxRQUFJO0FBQ0YsZUFBUyxLQUFLLEtBQUwsQ0FBVyxJQUFJLFlBQWYsQ0FBVDtBQUNELEtBRkQsQ0FFRSxPQUFPLENBQVAsRUFBVTtBQUNWLFNBQUcsT0FBSDtBQUNEO0FBQ0QsT0FBRyxPQUFPLE1BQVY7QUFDRCxHQVJEO0FBU0EsTUFBSSxJQUFKLENBQVMsS0FBSyxTQUFMLENBQWUsSUFBZixDQUFUO0FBQ0QsQzs7Ozs7Ozs7O2tCQ2RjLFVBQVUsR0FBVixFQUFlLElBQWYsRUFBcUIsRUFBckIsRUFBeUI7QUFDdEMsTUFBSSxNQUFNLElBQUksY0FBSixFQUFWO0FBQ0EsTUFBSSxJQUFKLENBQVMsTUFBVCxFQUFpQixHQUFqQixFQUFzQixJQUF0Qjs7QUFFQSxNQUFJLE1BQUosR0FBYSxVQUFVLENBQVYsRUFBYTtBQUN4QixRQUFJLFNBQVMsS0FBSyxLQUFMLENBQVcsSUFBSSxZQUFmLENBQWI7QUFDQSxPQUFHLE9BQU8sTUFBVjtBQUNELEdBSEQ7O0FBS0EsTUFBSSxJQUFKLENBQVMsSUFBVDtBQUNELEMiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiaW1wb3J0IGZpbGVVcGxvYWQgZnJvbSAnLi91cGxvYWQnO1xyXG5pbXBvcnQgcHJlcGFyZVNlbmQgZnJvbSAnLi9wcmVwYXJlU2VuZCc7XHJcblxyXG5jb25zdCBmb3JtQWRkQ291cnNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FkZC1jb3Vyc2UnKTtcclxuY29uc3QgZmlsZVNlbGVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmaWxlLXNlbGVjdCcpO1xyXG5jb25zdCBhZGROZXcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWRkLW5ldycpO1xyXG5cclxuLy8gdGhpcyBoYWNrIHRvIHByZXZlbnQgZG91YmxlIGRhdGEgaW4gZGJcclxuJCggXCIjYWRkLWJ0blwiICkudW5iaW5kKCBcImNsaWNrXCIgKTtcclxuJChcIiNpbWctaG9sZGVyXCIpLmF0dHIoJ2RhdGEtY29udGVudCcsJ1VwbG9hZCBwaWN0dXJlJyk7XHJcbmZpbGVTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24gKGUpIHsgaGFuZGxlRmlsZVNlbGVjdChlKTsgIHByZXBhcmVTZW5kRmlsZShlKTsgfSk7XHJcbmZvcm1BZGRDb3Vyc2UuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgcHJlcGFyZVNlbmRDb3Vyc2UpO1xyXG5mb3JtQWRkQ291cnNlLmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2V0JywgKGUpID0+IHsgZm9ybUFkZENvdXJzZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7IH0pO1xyXG5hZGROZXcuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4geyBlLnByZXZlbnREZWZhdWx0KCk7IGZvcm1BZGRDb3Vyc2Uuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjsgfSk7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVGaWxlU2VsZWN0KGV2dCkge1xyXG4gIHZhciBmID0gZXZ0LnRhcmdldC5maWxlc1swXTtcclxuICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG4gICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IChmdW5jdGlvbih0aGVGaWxlKSB7XHJcbiAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7ICAgICAgICAgIFxyXG4gICAgICAgICQoXCIjaW1nLWhvbGRlclwiKS5hdHRyKFwic3R5bGVcIixcImJhY2tncm91bmQtaW1hZ2U6IHVybChcIitlLnRhcmdldC5yZXN1bHQrXCIpO1wiKTtcclxuICAgICAgICAkKFwiI2ltZy1ob2xkZXJcIikuYXR0cignZGF0YS1jb250ZW50JywnJyk7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2ltZycsIGUudGFyZ2V0LnJlc3VsdCk7XHJcbiAgICAgIH07XHJcbiAgICB9KShmKTtcclxuICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGYpOyAgICBcclxufVxyXG5cclxuZnVuY3Rpb24gcHJlcGFyZVNlbmRGaWxlKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGxldCByZXN1bHRDb250YWluZXIgPSBmb3JtQWRkQ291cnNlLnF1ZXJ5U2VsZWN0b3IoJy5zdGF0dXMnKTtcclxuICAgIGxldCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xyXG4gICAgbGV0IGZpbGUgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcignI2ZpbGUtc2VsZWN0JylcclxuICAgICAgLmZpbGVzWzBdO1xyXG4gICAgbGV0IG5hbWUgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcignI2Rlc2MnKVxyXG4gICAgICAudmFsdWUgfHwgJ2NvdXJzZSc7XHJcbiAgXHJcbiAgICBmb3JtRGF0YS5hcHBlbmQoJ3Bob3RvJywgZmlsZSwgZmlsZS5uYW1lKTtcclxuICAgIGZvcm1EYXRhLmFwcGVuZCgnbmFtZScsIG5hbWUpO1xyXG4gIFxyXG4gICAgcmVzdWx0Q29udGFpbmVyLmlubmVySFRNTCA9ICdVcGxvYWRpbmcuLi4nO1xyXG4gICAgZmlsZVVwbG9hZCgnL2NvdXJzZXMvdXBsb2FkJywgZm9ybURhdGEsIGZ1bmN0aW9uIChkYXRhKSB7ICAgICAgXHJcbiAgICAgIHJlc3VsdENvbnRhaW5lci5pbm5lckhUTUwgPSBkYXRhLnN0YXR1cztcclxuICAgICAgJChcIiNpbWctaG9sZGVyXCIpLmF0dHIoXCJzdHlsZVwiLGBiYWNrZ3JvdW5kLWltYWdlOnVybChcIiR7ZGF0YS51cmx9XCIpO2ApO1xyXG4gICAgICAkKFwiI2ltZy1ob2xkZXJcIikuYXR0cignZGF0YS1jb250ZW50JywnJyk7XHJcbiAgICAgIC8vIGZvcm1VcGxvYWQucmVzZXQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbmZ1bmN0aW9uIHByZXBhcmVTZW5kQ291cnNlKGUpIHsgICAgXHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGxldCBsaW5rID0gJChcIiNpbWctaG9sZGVyXCIpLmNzcyhcImJhY2tncm91bmQtaW1hZ2VcIikudHJpbSgpOyAgIFxyXG4gIGxldCBwaWMgPSBsaW5rLnN1YnN0cmluZyg1LCBsaW5rLmxlbmd0aCAtIDIpOyAgXHJcbiAgbGV0IHN0YXJ0ID0gZm9ybUFkZENvdXJzZS5zdGFydC52YWx1ZSB8fCBuZXcgRGF0ZSgpO1xyXG4gIGxldCBlbmQgPSBmb3JtQWRkQ291cnNlLmVuZC52YWx1ZSB8fCBuZXcgRGF0ZSgpOyAgXHJcblxyXG4gIGxldCBkYXRhID0ge1xyXG4gICAgcGljdHVyZTogcGljLFxyXG4gICAgZGF0ZVN0YXJ0OiBzdGFydCxcclxuICAgIGRhdGVFbmQ6IGVuZCxcclxuICAgIG5hbWU6IGZvcm1BZGRDb3Vyc2UubmFtZS52YWx1ZSxcclxuICAgIGRlc2M6IGZvcm1BZGRDb3Vyc2UuZGVzYy52YWx1ZVxyXG4gIH07XHJcbiAgXHJcbiAgcHJlcGFyZVNlbmQoJy9jb3Vyc2VzL2FkZGNvdXJzZScsIGZvcm1BZGRDb3Vyc2UsIGRhdGEpO1xyXG4gIGxvY2F0aW9uLnJlbG9hZCgpO1xyXG59IiwiaW1wb3J0IHNlbmRBamF4SnNvbiBmcm9tICcuL3NlbmRBamF4JztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHByZXBhcmVTZW5kKHVybCwgZm9ybSwgZGF0YSwgY2IpIHtcclxuICBsZXQgcmVzdWx0Q29udGFpbmVyID0gZm9ybS5xdWVyeVNlbGVjdG9yKCcuc3RhdHVzJyk7XHJcbiAgcmVzdWx0Q29udGFpbmVyLmlubmVySFRNTCA9ICdTZW5kaW5nLi4uJztcclxuICBzZW5kQWpheEpzb24odXJsLCBkYXRhLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgZm9ybS5yZXNldCgpO1xyXG4gICAgcmVzdWx0Q29udGFpbmVyLmlubmVySFRNTCA9IGRhdGE7XHJcbiAgICBpZiAoY2IpIHtcclxuICAgICAgY2IoZGF0YSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAodXJsLCBkYXRhLCBjYikge1xyXG4gIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICB4aHIub3BlbignUE9TVCcsIHVybCwgdHJ1ZSk7XHJcbiAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XHJcbiAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICBsZXQgcmVzdWx0O1xyXG4gICAgdHJ5IHtcclxuICAgICAgcmVzdWx0ID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgY2IoJ0Vycm9yJyk7XHJcbiAgICB9XHJcbiAgICBjYihyZXN1bHQuc3RhdHVzKTtcclxuICB9O1xyXG4gIHhoci5zZW5kKEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcclxufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uICh1cmwsIGRhdGEsIGNiKSB7XHJcbiAgbGV0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gIHhoci5vcGVuKCdQT1NUJywgdXJsLCB0cnVlKTtcclxuXHJcbiAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICBsZXQgcmVzdWx0ID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcclxuICAgIGNiKHJlc3VsdC5zdGF0dXMpO1xyXG4gIH07XHJcblxyXG4gIHhoci5zZW5kKGRhdGEpO1xyXG59Il19"}