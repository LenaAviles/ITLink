{"version":3,"sources":["node_modules/browser-pack/_prelude.js","source/js/courses.js","source/js/prepareSend.js","source/js/sendAjax.js","source/js/upload.js"],"names":[],"mappings":"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","file":"../courses.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import fileUpload from './upload';\r\nimport prepareSend from './prepareSend';\r\n\r\nconst formAddCourse = document.querySelector('#add-course');\r\nconst fileSelect = document.querySelector('#file-select'); \r\n\r\n// this hack to prevent double data in db\r\n$( \"#add-btn\" ).unbind( \"click\" );\r\nfileSelect.addEventListener('change', function (e) { prepareSendFile(e); });\r\nformAddCourse.addEventListener('submit', prepareSendCourse);\r\n\r\n// function handleFileSelect(evt) {\r\n//   var f = evt.target.files[0];\r\n//     var reader = new FileReader();\r\n//           reader.onload = (function(theFile) {\r\n//       return function(e) {          \r\n//         $(\"#img-holder\").attr(\"style\",\"background-image:url(\"+e.target.result+\")\");\r\n//         localStorage.setItem('img', e.target.result);\r\n//       };\r\n//     })(f);\r\n//     reader.readAsDataURL(f);    \r\n// }\r\n\r\nfunction prepareSendFile(e) {\r\n    e.preventDefault();\r\n    let resultContainer = formAddCourse.querySelector('.status');\r\n    let formData = new FormData();\r\n    let file = document\r\n      .querySelector('#file-select')\r\n      .files[0];\r\n    let name = document\r\n      .querySelector('#course-desc')\r\n      .value || 'course';\r\n  \r\n    formData.append('photo', file, file.name);\r\n    formData.append('name', name);\r\n  \r\n    resultContainer.innerHTML = 'Uploading...';\r\n    fileUpload('/courses/upload', formData, function (data) {      \r\n      resultContainer.innerHTML = data.status;\r\n      $(\"#img-holder\").attr(\"style\",`background-image:url(\"${data.url}\")`);\r\n      // formUpload.reset();\r\n    });\r\n  }\r\n\r\nfunction prepareSendCourse(e) {    \r\n  e.preventDefault();   \r\n  let pic = $(\"#img-holder\").css(\"background-image\").replace(/url\\((?:\\\"|\\')?(.+)(?:\\\"|\\')?\\)/, '$1');\r\n  let start = formAddCourse.start.value || new Date();\r\n  let end = formAddCourse.end.value || new Date();\r\n\r\n  let data = {\r\n    picture: pic,\r\n    dateStart: start,\r\n    dateEnd: end,\r\n    name: formAddCourse.text.value\r\n  };\r\n  \r\n  prepareSend('/courses/addcourse', formAddCourse, data);\r\n}","import sendAjaxJson from './sendAjax';\r\n\r\nexport default function prepareSend(url, form, data, cb) {\r\n  let resultContainer = form.querySelector('.status');\r\n  resultContainer.innerHTML = 'Sending...';\r\n  sendAjaxJson(url, data, function (data) {\r\n    form.reset();\r\n    resultContainer.innerHTML = data;\r\n    if (cb) {\r\n      cb(data);\r\n    }\r\n  });\r\n}","export default function (url, data, cb) {\r\n  let xhr = new XMLHttpRequest();\r\n  xhr.open('POST', url, true);\r\n  xhr.setRequestHeader('Content-Type', 'application/json');\r\n  xhr.onload = function (e) {\r\n    let result;\r\n    try {\r\n      result = JSON.parse(xhr.responseText);\r\n    } catch (e) {\r\n      cb('Error');\r\n    }\r\n    cb(result.status);\r\n  };\r\n  xhr.send(JSON.stringify(data));\r\n}","export default function (url, data, cb) {\r\n  let xhr = new XMLHttpRequest();\r\n  xhr.open('POST', url, true);\r\n\r\n  xhr.onload = function (e) {\r\n    let result = JSON.parse(xhr.responseText);\r\n    cb(result.status);\r\n  };\r\n\r\n  xhr.send(data);\r\n}"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzb3VyY2UvanMvY291cnNlcy5qcyIsInNvdXJjZS9qcy9wcmVwYXJlU2VuZC5qcyIsInNvdXJjZS9qcy9zZW5kQWpheC5qcyIsInNvdXJjZS9qcy91cGxvYWQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBOzs7O0FBQ0E7Ozs7OztBQUVBLElBQU0sZ0JBQWdCLFNBQVMsYUFBVCxDQUF1QixhQUF2QixDQUF0QjtBQUNBLElBQU0sYUFBYSxTQUFTLGFBQVQsQ0FBdUIsY0FBdkIsQ0FBbkI7O0FBRUE7QUFDQSxFQUFHLFVBQUgsRUFBZ0IsTUFBaEIsQ0FBd0IsT0FBeEI7QUFDQSxXQUFXLGdCQUFYLENBQTRCLFFBQTVCLEVBQXNDLFVBQVUsQ0FBVixFQUFhO0FBQUUsa0JBQWdCLENBQWhCO0FBQXFCLENBQTFFO0FBQ0EsY0FBYyxnQkFBZCxDQUErQixRQUEvQixFQUF5QyxpQkFBekM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxTQUFTLGVBQVQsQ0FBeUIsQ0FBekIsRUFBNEI7QUFDeEIsSUFBRSxjQUFGO0FBQ0EsTUFBSSxrQkFBa0IsY0FBYyxhQUFkLENBQTRCLFNBQTVCLENBQXRCO0FBQ0EsTUFBSSxXQUFXLElBQUksUUFBSixFQUFmO0FBQ0EsTUFBSSxPQUFPLFNBQ1IsYUFEUSxDQUNNLGNBRE4sRUFFUixLQUZRLENBRUYsQ0FGRSxDQUFYO0FBR0EsTUFBSSxPQUFPLFNBQ1IsYUFEUSxDQUNNLGNBRE4sRUFFUixLQUZRLElBRUMsUUFGWjs7QUFJQSxXQUFTLE1BQVQsQ0FBZ0IsT0FBaEIsRUFBeUIsSUFBekIsRUFBK0IsS0FBSyxJQUFwQztBQUNBLFdBQVMsTUFBVCxDQUFnQixNQUFoQixFQUF3QixJQUF4Qjs7QUFFQSxrQkFBZ0IsU0FBaEIsR0FBNEIsY0FBNUI7QUFDQSx3QkFBVyxpQkFBWCxFQUE4QixRQUE5QixFQUF3QyxVQUFVLElBQVYsRUFBZ0I7QUFDdEQsb0JBQWdCLFNBQWhCLEdBQTRCLEtBQUssTUFBakM7QUFDQSxNQUFFLGFBQUYsRUFBaUIsSUFBakIsQ0FBc0IsT0FBdEIsNkJBQXVELEtBQUssR0FBNUQ7QUFDQTtBQUNELEdBSkQ7QUFLRDs7QUFFSCxTQUFTLGlCQUFULENBQTJCLENBQTNCLEVBQThCO0FBQzVCLElBQUUsY0FBRjtBQUNBLE1BQUksTUFBTSxFQUFFLGFBQUYsRUFBaUIsR0FBakIsQ0FBcUIsa0JBQXJCLEVBQXlDLE9BQXpDLENBQWlELGlDQUFqRCxFQUFvRixJQUFwRixDQUFWO0FBQ0EsTUFBSSxRQUFRLGNBQWMsS0FBZCxDQUFvQixLQUFwQixJQUE2QixJQUFJLElBQUosRUFBekM7QUFDQSxNQUFJLE1BQU0sY0FBYyxHQUFkLENBQWtCLEtBQWxCLElBQTJCLElBQUksSUFBSixFQUFyQzs7QUFFQSxNQUFJLE9BQU87QUFDVCxhQUFTLEdBREE7QUFFVCxlQUFXLEtBRkY7QUFHVCxhQUFTLEdBSEE7QUFJVCxVQUFNLGNBQWMsSUFBZCxDQUFtQjtBQUpoQixHQUFYOztBQU9BLDZCQUFZLG9CQUFaLEVBQWtDLGFBQWxDLEVBQWlELElBQWpEO0FBQ0Q7Ozs7Ozs7O2tCQ3pEdUIsVzs7QUFGeEI7Ozs7OztBQUVlLFNBQVMsV0FBVCxDQUFxQixHQUFyQixFQUEwQixJQUExQixFQUFnQyxJQUFoQyxFQUFzQyxFQUF0QyxFQUEwQztBQUN2RCxNQUFJLGtCQUFrQixLQUFLLGFBQUwsQ0FBbUIsU0FBbkIsQ0FBdEI7QUFDQSxrQkFBZ0IsU0FBaEIsR0FBNEIsWUFBNUI7QUFDQSwwQkFBYSxHQUFiLEVBQWtCLElBQWxCLEVBQXdCLFVBQVUsSUFBVixFQUFnQjtBQUN0QyxTQUFLLEtBQUw7QUFDQSxvQkFBZ0IsU0FBaEIsR0FBNEIsSUFBNUI7QUFDQSxRQUFJLEVBQUosRUFBUTtBQUNOLFNBQUcsSUFBSDtBQUNEO0FBQ0YsR0FORDtBQU9EOzs7Ozs7Ozs7a0JDWmMsVUFBVSxHQUFWLEVBQWUsSUFBZixFQUFxQixFQUFyQixFQUF5QjtBQUN0QyxNQUFJLE1BQU0sSUFBSSxjQUFKLEVBQVY7QUFDQSxNQUFJLElBQUosQ0FBUyxNQUFULEVBQWlCLEdBQWpCLEVBQXNCLElBQXRCO0FBQ0EsTUFBSSxnQkFBSixDQUFxQixjQUFyQixFQUFxQyxrQkFBckM7QUFDQSxNQUFJLE1BQUosR0FBYSxVQUFVLENBQVYsRUFBYTtBQUN4QixRQUFJLGVBQUo7QUFDQSxRQUFJO0FBQ0YsZUFBUyxLQUFLLEtBQUwsQ0FBVyxJQUFJLFlBQWYsQ0FBVDtBQUNELEtBRkQsQ0FFRSxPQUFPLENBQVAsRUFBVTtBQUNWLFNBQUcsT0FBSDtBQUNEO0FBQ0QsT0FBRyxPQUFPLE1BQVY7QUFDRCxHQVJEO0FBU0EsTUFBSSxJQUFKLENBQVMsS0FBSyxTQUFMLENBQWUsSUFBZixDQUFUO0FBQ0QsQzs7Ozs7Ozs7O2tCQ2RjLFVBQVUsR0FBVixFQUFlLElBQWYsRUFBcUIsRUFBckIsRUFBeUI7QUFDdEMsTUFBSSxNQUFNLElBQUksY0FBSixFQUFWO0FBQ0EsTUFBSSxJQUFKLENBQVMsTUFBVCxFQUFpQixHQUFqQixFQUFzQixJQUF0Qjs7QUFFQSxNQUFJLE1BQUosR0FBYSxVQUFVLENBQVYsRUFBYTtBQUN4QixRQUFJLFNBQVMsS0FBSyxLQUFMLENBQVcsSUFBSSxZQUFmLENBQWI7QUFDQSxPQUFHLE9BQU8sTUFBVjtBQUNELEdBSEQ7O0FBS0EsTUFBSSxJQUFKLENBQVMsSUFBVDtBQUNELEMiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiaW1wb3J0IGZpbGVVcGxvYWQgZnJvbSAnLi91cGxvYWQnO1xyXG5pbXBvcnQgcHJlcGFyZVNlbmQgZnJvbSAnLi9wcmVwYXJlU2VuZCc7XHJcblxyXG5jb25zdCBmb3JtQWRkQ291cnNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FkZC1jb3Vyc2UnKTtcclxuY29uc3QgZmlsZVNlbGVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmaWxlLXNlbGVjdCcpOyBcclxuXHJcbi8vIHRoaXMgaGFjayB0byBwcmV2ZW50IGRvdWJsZSBkYXRhIGluIGRiXHJcbiQoIFwiI2FkZC1idG5cIiApLnVuYmluZCggXCJjbGlja1wiICk7XHJcbmZpbGVTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24gKGUpIHsgcHJlcGFyZVNlbmRGaWxlKGUpOyB9KTtcclxuZm9ybUFkZENvdXJzZS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBwcmVwYXJlU2VuZENvdXJzZSk7XHJcblxyXG4vLyBmdW5jdGlvbiBoYW5kbGVGaWxlU2VsZWN0KGV2dCkge1xyXG4vLyAgIHZhciBmID0gZXZ0LnRhcmdldC5maWxlc1swXTtcclxuLy8gICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG4vLyAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IChmdW5jdGlvbih0aGVGaWxlKSB7XHJcbi8vICAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7ICAgICAgICAgIFxyXG4vLyAgICAgICAgICQoXCIjaW1nLWhvbGRlclwiKS5hdHRyKFwic3R5bGVcIixcImJhY2tncm91bmQtaW1hZ2U6dXJsKFwiK2UudGFyZ2V0LnJlc3VsdCtcIilcIik7XHJcbi8vICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2ltZycsIGUudGFyZ2V0LnJlc3VsdCk7XHJcbi8vICAgICAgIH07XHJcbi8vICAgICB9KShmKTtcclxuLy8gICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGYpOyAgICBcclxuLy8gfVxyXG5cclxuZnVuY3Rpb24gcHJlcGFyZVNlbmRGaWxlKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGxldCByZXN1bHRDb250YWluZXIgPSBmb3JtQWRkQ291cnNlLnF1ZXJ5U2VsZWN0b3IoJy5zdGF0dXMnKTtcclxuICAgIGxldCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xyXG4gICAgbGV0IGZpbGUgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcignI2ZpbGUtc2VsZWN0JylcclxuICAgICAgLmZpbGVzWzBdO1xyXG4gICAgbGV0IG5hbWUgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcignI2NvdXJzZS1kZXNjJylcclxuICAgICAgLnZhbHVlIHx8ICdjb3Vyc2UnO1xyXG4gIFxyXG4gICAgZm9ybURhdGEuYXBwZW5kKCdwaG90bycsIGZpbGUsIGZpbGUubmFtZSk7XHJcbiAgICBmb3JtRGF0YS5hcHBlbmQoJ25hbWUnLCBuYW1lKTtcclxuICBcclxuICAgIHJlc3VsdENvbnRhaW5lci5pbm5lckhUTUwgPSAnVXBsb2FkaW5nLi4uJztcclxuICAgIGZpbGVVcGxvYWQoJy9jb3Vyc2VzL3VwbG9hZCcsIGZvcm1EYXRhLCBmdW5jdGlvbiAoZGF0YSkgeyAgICAgIFxyXG4gICAgICByZXN1bHRDb250YWluZXIuaW5uZXJIVE1MID0gZGF0YS5zdGF0dXM7XHJcbiAgICAgICQoXCIjaW1nLWhvbGRlclwiKS5hdHRyKFwic3R5bGVcIixgYmFja2dyb3VuZC1pbWFnZTp1cmwoXCIke2RhdGEudXJsfVwiKWApO1xyXG4gICAgICAvLyBmb3JtVXBsb2FkLnJlc2V0KCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG5mdW5jdGlvbiBwcmVwYXJlU2VuZENvdXJzZShlKSB7ICAgIFxyXG4gIGUucHJldmVudERlZmF1bHQoKTsgICBcclxuICBsZXQgcGljID0gJChcIiNpbWctaG9sZGVyXCIpLmNzcyhcImJhY2tncm91bmQtaW1hZ2VcIikucmVwbGFjZSgvdXJsXFwoKD86XFxcInxcXCcpPyguKykoPzpcXFwifFxcJyk/XFwpLywgJyQxJyk7XHJcbiAgbGV0IHN0YXJ0ID0gZm9ybUFkZENvdXJzZS5zdGFydC52YWx1ZSB8fCBuZXcgRGF0ZSgpO1xyXG4gIGxldCBlbmQgPSBmb3JtQWRkQ291cnNlLmVuZC52YWx1ZSB8fCBuZXcgRGF0ZSgpO1xyXG5cclxuICBsZXQgZGF0YSA9IHtcclxuICAgIHBpY3R1cmU6IHBpYyxcclxuICAgIGRhdGVTdGFydDogc3RhcnQsXHJcbiAgICBkYXRlRW5kOiBlbmQsXHJcbiAgICBuYW1lOiBmb3JtQWRkQ291cnNlLnRleHQudmFsdWVcclxuICB9O1xyXG4gIFxyXG4gIHByZXBhcmVTZW5kKCcvY291cnNlcy9hZGRjb3Vyc2UnLCBmb3JtQWRkQ291cnNlLCBkYXRhKTtcclxufSIsImltcG9ydCBzZW5kQWpheEpzb24gZnJvbSAnLi9zZW5kQWpheCc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBwcmVwYXJlU2VuZCh1cmwsIGZvcm0sIGRhdGEsIGNiKSB7XHJcbiAgbGV0IHJlc3VsdENvbnRhaW5lciA9IGZvcm0ucXVlcnlTZWxlY3RvcignLnN0YXR1cycpO1xyXG4gIHJlc3VsdENvbnRhaW5lci5pbm5lckhUTUwgPSAnU2VuZGluZy4uLic7XHJcbiAgc2VuZEFqYXhKc29uKHVybCwgZGF0YSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgIGZvcm0ucmVzZXQoKTtcclxuICAgIHJlc3VsdENvbnRhaW5lci5pbm5lckhUTUwgPSBkYXRhO1xyXG4gICAgaWYgKGNiKSB7XHJcbiAgICAgIGNiKGRhdGEpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKHVybCwgZGF0YSwgY2IpIHtcclxuICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgeGhyLm9wZW4oJ1BPU1QnLCB1cmwsIHRydWUpO1xyXG4gIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xyXG4gIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgbGV0IHJlc3VsdDtcclxuICAgIHRyeSB7XHJcbiAgICAgIHJlc3VsdCA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGNiKCdFcnJvcicpO1xyXG4gICAgfVxyXG4gICAgY2IocmVzdWx0LnN0YXR1cyk7XHJcbiAgfTtcclxuICB4aHIuc2VuZChKU09OLnN0cmluZ2lmeShkYXRhKSk7XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAodXJsLCBkYXRhLCBjYikge1xyXG4gIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICB4aHIub3BlbignUE9TVCcsIHVybCwgdHJ1ZSk7XHJcblxyXG4gIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgbGV0IHJlc3VsdCA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XHJcbiAgICBjYihyZXN1bHQuc3RhdHVzKTtcclxuICB9O1xyXG5cclxuICB4aHIuc2VuZChkYXRhKTtcclxufSJdfQ=="}